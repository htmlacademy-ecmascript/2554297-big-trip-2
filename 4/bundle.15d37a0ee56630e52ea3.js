(()=>{"use strict";function e(e){const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function t(e,t,n="beforeend"){t.insertAdjacentElement(n,e.getElement())}function n(e,t){return Math.floor(Math.random()*(t-e+1))+e}function i(e){const t=new Date(e);return`${t.getUTCDate()}/${(t.getUTCMonth()+1).toString().padStart(2,"0")}/${t.getUTCFullYear().toString().slice(-2)} ${t.getUTCHours().toString().padStart(2,"0")}:${t.getUTCMinutes().toString().padStart(2,"0")}`}class s{constructor(e,t,n){this.event=e,this.destinationModel=t,this.offerModel=n}getTemplate(){return function(e,t,n){const{basePrice:s,dateFrom:r,dateTo:l,destination:a,type:o,offers:d=[]}=e,p=t.getDestinationById(a),c=r?i(r):"",v=l?i(l):"",f=p.name||"",u=p.description||"",h=n.getOffersByType(o),_=h.map(e=>{const t=d.includes(e.id)?"checked":"",n=e.title.toLowerCase().split(" ").join("-");return`\n        <div class="event__offer-selector">\n          <input class="event__offer-checkbox visually-hidden"\n                 id="event-offer-${n}-${e.id}"\n                 type="checkbox"\n                 name="event-offer-${n}"\n                 ${t}>\n          <label class="event__offer-label" for="event-offer-${n}-${e.id}">\n            <span class="event__offer-title">${e.title}</span>\n            +€ <span class="event__offer-price">${e.price}</span>\n          </label>\n        </div>\n      `}).join(""),m=t.getDestinations();return`\n    <form class="event event--edit" action="#" method="post">\n      <header class="event__header">\n        <div class="event__type-wrapper">\n          <label class="event__type event__type-btn" for="event-type-toggle-1">\n            <span class="visually-hidden">Choose event type</span>\n            <img class="event__type-icon" width="17" height="17" src="img/icons/${o||"flight"}.png" alt="Event type icon">\n          </label>\n          <input class="event__type-toggle visually-hidden" id="event-type-toggle-1" type="checkbox">\n          <div class="event__type-list">\n            <fieldset class="event__type-group">\n              <legend class="visually-hidden">Event type</legend>\n              ${["taxi","bus","train","ship","drive","flight","check-in","sightseeing","restaurant"].map(e=>{return`\n                    <div class="event__type-item">\n                      <input id="event-type-${e}-1"\n                             class="event__type-input visually-hidden"\n                             type="radio"\n                             name="event-type"\n                             value="${e}"\n                             ${t=e,t===o?"checked":""}>\n                      <label class="event__type-label event__type-label--${e}"\n                             for="event-type-${e}-1">${e.charAt(0).toUpperCase()+e.slice(1)}</label>\n                    </div>\n                  `;var t}).join("")}\n            </fieldset>\n          </div>\n        </div>\n\n        <div class="event__field-group event__field-group--destination">\n          <label class="event__label event__type-output" for="event-destination-1">\n            ${o||"Flight"}\n          </label>\n          <input class="event__input event__input--destination"\n                 id="event-destination-1"\n                 type="text"\n                 name="event-destination"\n                 value="${f}"\n                 list="destination-list-1">\n          <datalist id="destination-list-1">\n            ${m.map(e=>`<option value="${e.name}"></option>`).join("")}\n          </datalist>\n        </div>\n\n        <div class="event__field-group event__field-group--time">\n          <label class="visually-hidden" for="event-start-time-1">From</label>\n          <input class="event__input event__input--time"\n                 id="event-start-time-1"\n                 type="text"\n                 name="event-start-time"\n                 value="${c}">\n          —\n          <label class="visually-hidden" for="event-end-time-1">To</label>\n          <input class="event__input event__input--time"\n                 id="event-end-time-1"\n                 type="text"\n                 name="event-end-time"\n                 value="${v}">\n        </div>\n\n        <div class="event__field-group event__field-group--price">\n          <label class="event__label" for="event-price-1">\n            <span class="visually-hidden">Price</span>\n            €\n          </label>\n          <input class="event__input event__input--price"\n                 id="event-price-1"\n                 type="text"\n                 name="event-price"\n                 value="${s||""}">\n        </div>\n\n        <button class="event__save-btn btn btn--blue" type="submit">Save</button>\n        <button class="event__reset-btn" type="reset">${e.id?"Delete":"Cancel"}</button>\n        ${e.id?'\n          <button class="event__rollup-btn" type="button">\n            <span class="visually-hidden">Open event</span>\n          </button>\n        ':""}\n      </header>\n      <section class="event__details">\n        ${h.length?`\n          <section class="event__section event__section--offers">\n            <h3 class="event__section-title event__section-title--offers">Offers</h3>\n            <div class="event__available-offers">\n              ${_}\n            </div>\n          </section>\n        `:""}\n        <section class="event__section event__section--destination">\n          <h3 class="event__section-title event__section-title--destination">Destination</h3>\n          <p class="event__destination-description">${u}</p>\n        </section>\n      </section>\n    </form>\n  `}(this.event,this.destinationModel,this.offerModel)}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class r{getTemplate(){return'<form class="trip-filters" action="#" method="get">\n            <div class="trip-filters__filter">\n              <input\n                id="filter-everything"\n                class="trip-filters__filter-input visually-hidden"\n                type="radio"\n                name="trip-filter"\n                value="everything"\n              >\n              <label class="trip-filters__filter-label" for="filter-everything">Everything</label>\n            </div>\n\n            <div class="trip-filters__filter">\n              <input\n                id="filter-future"\n                class="trip-filters__filter-input visually-hidden"\n                type="radio"\n                name="trip-filter"\n                value="future"\n              >\n              <label class="trip-filters__filter-label" for="filter-future">Future</label>\n            </div>\n\n            <div class="trip-filters__filter">\n              <input\n                id="filter-present"\n                class="trip-filters__filter-input visually-hidden"\n                type="radio"\n                name="trip-filter"\n                value="present"\n              >\n              <label class="trip-filters__filter-label" for="filter-present">Present</label>\n            </div>\n\n            <div class="trip-filters__filter">\n              <input\n                id="filter-past"\n                class="trip-filters__filter-input visually-hidden"\n                type="radio"\n                name="trip-filter"\n                value="past"\n                checked\n              >\n              <label class="trip-filters__filter-label" for="filter-past">Past</label>\n            </div>\n\n            <button class="visually-hidden" type="submit">Accept filter</button>\n          </form>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class l{constructor(e,t,n){this.event=e||{},this.destination=t||{},this.offers=n||[]}getTemplate(){return function(e,t,n){const{basePrice:i="",dateFrom:s="",dateTo:r="",type:l="flight",isFavorite:a=!1,offers:o=[]}=e,{name:d=""}=t,p=new Date(s),c=new Date(r),v=p.getUTCDate()||"",f=s.split("T")[0]||s.split(" ")[0]||"",u=s.split(" ")[1]||s.split("T")[1]?.slice(0,5)||"",h=r.split(" ")[1]||r.split("T")[1]?.slice(0,5)||"",_=c-p;return`\n    <li class="trip-events__item">\n      <div class="event">\n        <time class="event__date" datetime="${f}">${v}</time>\n        <div class="event__type">\n          <img class="event__type-icon" width="42" height="42" src="img/icons/${l}.png" alt="Event type icon">\n        </div>\n        <h3 class="event__title">${l} ${d}</h3>\n        <div class="event__schedule">\n          <p class="event__time">\n            <time class="event__start-time" datetime="${s}">${u}</time>\n            —\n            <time class="event__end-time" datetime="${r}">${h}</time>\n          </p>\n          <p class="event__duration">${`${Math.floor(_/36e5)}h ${Math.floor(_%36e5/6e4).toString().padStart(2,"0")}m`}</p>\n        </div>\n        <p class="event__price">\n          € <span class="event__price-value">${i}</span>\n        </p>\n        <h4 class="visually-hidden">Offers:</h4>\n        <ul class="event__selected-offers">\n          ${n.filter(e=>o.includes(e.id)).map(e=>`\n      <li class="event__offer">\n        <span class="event__offer-title">${e.title}</span>\n        +€&nbsp;<span class="event__offer-price">${e.price}</span>\n      </li>\n    `).join("")}\n        </ul>\n        <button class="event__favorite-btn ${a?"event__favorite-btn--active":""}" type="button">\n          <span class="visually-hidden">Add to favorite</span>\n          <svg class="event__favorite-icon" width="28" height="28" viewBox="0 0 28 28">\n            <path d="M14 21l-8.22899 4.3262 1.57159-9.1631L.685209 9.67376 9.8855 8.33688 14 0l4.1145 8.33688 9.2003 1.33688-6.6574 6.48934 1.5716 9.1631L14 21z"/>\n          </svg>\n        </button>\n      </div>\n    </li>\n  `}(this.event,this.destination,this.offers)}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class a{getTemplate(){return'<ul class="trip-events__list"></ul>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class o{getTemplate(){return'\n  <form class="trip-events__trip-sort trip-sort" action="#" method="get">\n    <div class="trip-sort__item trip-sort__item--day">\n      <input\n        id="sort-day"\n        class="trip-sort__input visually-hidden"\n        type="radio"\n        name="trip-sort"\n        value="sort-day"\n      >\n      <label class="trip-sort__btn" for="sort-day">Day</label>\n    </div>\n\n    <div class="trip-sort__item trip-sort__item--event">\n      <input\n        id="sort-event"\n        class="trip-sort__input visually-hidden"\n        type="radio"\n        name="trip-sort"\n        value="sort-event"\n        disabled\n      >\n      <label class="trip-sort__btn" for="sort-event">Event</label>\n    </div>\n\n    <div class="trip-sort__item trip-sort__item--time">\n      <input\n        id="sort-time"\n        class="trip-sort__input visually-hidden"\n        type="radio"\n        name="trip-sort"\n        value="sort-time"\n      >\n      <label class="trip-sort__btn" for="sort-time">Time</label>\n    </div>\n\n    <div class="trip-sort__item trip-sort__item--price">\n      <input\n        id="sort-price"\n        class="trip-sort__input visually-hidden"\n        type="radio"\n        name="trip-sort"\n        value="sort-price"\n        checked\n      >\n      <label class="trip-sort__btn" for="sort-price">Price</label>\n    </div>\n\n    <div class="trip-sort__item trip-sort__item--offer">\n      <input\n        id="sort-offer"\n        class="trip-sort__input visually-hidden"\n        type="radio"\n        name="trip-sort"\n        value="sort-offer"\n        disabled\n      >\n      <label class="trip-sort__btn" for="sort-offer">Offers</label>\n    </div>\n  </form>\n'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}const d=1e3,p=5e3,c=[{id:1,basePrice:n(d,p),dateFrom:"2025-08-10T22:55:00.000Z",dateTo:"2025-08-11T11:22:00.000Z",destination:1,isFavorite:!1,offers:[1,2,3],type:"taxi"},{id:2,basePrice:n(d,p),dateFrom:"2025-02-10T14:30:00.000Z",dateTo:"2025-02-10T18:45:00.000Z",destination:2,isFavorite:!0,offers:[4,5,6],type:"flight"},{id:3,basePrice:n(d,p),dateFrom:"2025-03-15T09:00:00.000Z",dateTo:"2025-03-15T10:15:00.000Z",destination:3,isFavorite:!1,offers:[7,8],type:"check-in"},{id:4,basePrice:n(d,p),dateFrom:"2025-06-20T07:25:00.000Z",dateTo:"2025-06-20T19:40:00.000Z",destination:4,isFavorite:!0,offers:[],type:"sightseeing"}],v=[{id:1,description:"Chamonix, nestled in the heart of the French Alps, is a haven for adventurers. Known for its breathtaking views of Mont Blanc and world-class skiing, this charming town blends alpine tradition with vibrant energy.",name:"Chamonix",pictures:[{src:"https://picsum.photos/300/200?random=1",description:"Majestic Mont Blanc towering over Chamonix"},{src:"https://picsum.photos/300/200?random=2",description:"Cozy wooden chalets in the evening light"}]},{id:2,description:"Geneva, a sophisticated Swiss city at the edge of Lake Geneva, is a blend of natural beauty and international flair. Surrounded by the Alps and Jura mountains, it’s a hub of diplomacy and home to serene waterfronts.",name:"Geneva",pictures:[{src:"https://picsum.photos/300/200?random=3",description:"The iconic Jet d’Eau fountain against the Geneva skyline"},{src:"https://picsum.photos/300/200?random=4",description:"Strolling along the peaceful shores of Lake Geneva"}]},{id:3,description:"Amsterdam, the Venice of the North, is a city of winding canals, historic architecture, and a free-spirited vibe. From its colorful tulip markets to its famous museums, it’s a place where past and present dance together.",name:"Amsterdam",pictures:[{src:"https://picsum.photos/300/200?random=5",description:"A picturesque canal lined with traditional Dutch houses"},{src:"https://picsum.photos/300/200?random=6",description:"Bicycles parked near the vibrant Bloemenmarkt"}]},{id:4,description:"Tokyo, a dazzling metropolis where ancient temples stand alongside futuristic skyscrapers. This city pulses with energy, offering a mix of serene gardens, neon-lit streets, and a culinary scene that’s second to none.",name:"Tokyo",pictures:[{src:"https://picsum.photos/300/200?random=7",description:"The bustling Shibuya Crossing at twilight"},{src:"https://picsum.photos/300/200?random=8",description:"Cherry blossoms framing a quiet Shinto shrine"}]},{id:5,description:"Lisbon, Portugal’s sun-drenched capital, is a city of hilly streets and golden light. With its pastel-colored buildings, clattering trams, and soulful Fado music, it’s a place that captures the heart effortlessly.",name:"Lisbon",pictures:[{src:"https://picsum.photos/300/200?random=9",description:"The iconic Belém Tower glowing at sunset"},{src:"https://picsum.photos/300/200?random=10",description:"A yellow tram winding through Alfama’s narrow streets"}]}],f=10,u=100,h=[{type:"taxi",offers:[{id:1,title:"Upgrade to a business class",price:n(f,u)},{id:2,title:"Add meal",price:n(f,u)},{id:3,title:"Choose a premium car",price:n(f,u)}]},{type:"flight",offers:[{id:4,title:"Add extra luggage",price:n(f,u)},{id:5,title:"Priority boarding",price:n(f,u)},{id:6,title:"Select seat",price:n(f,u)}]},{type:"check-in",offers:[{id:7,title:"Early check-in",price:n(f,u)},{id:8,title:"Late check-out",price:n(f,u)}]},{type:"sightseeing",offers:[]}],_=new class{events=[...c];getEvents(){return this.events}},m=new class{destinations=[...v];getDestinations(){return this.destinations}getDestinationById(e){return this.destinations.find(t=>t.id===e)}},g=new class{offers=[...h];getOffers(){return this.offers}getOffersById(e,t){const n=this.offers.filter(t=>t.type===e)[0].offers.find(e=>e.id===t);return n?n.offers:[]}getOffersByType(e){const t=this.offers.find(t=>t.type===e);return t?t.offers:[]}};new class{RoutePointListComponent=new a;constructor(e,t,n){this.tripEvents=document.querySelector(".trip-events"),this.tripControlFilters=document.querySelector(".trip-controls__filters"),this.destinationModel=e,this.eventModel=t,this.offerModel=n}init(){const e=this.eventModel.getEvents();t(new r,this.tripControlFilters),t(new o,this.tripEvents),t(this.RoutePointListComponent,this.tripEvents),t(new s(e[0],this.destinationModel,this.offerModel),this.RoutePointListComponent.getElement());for(let n=0;n<Math.min(3,e.length);n++){const i=e[n],s=this.destinationModel.getDestinationById(i.destination),r=this.offerModel.getOffersByType(i.type).filter(e=>i.offers.includes(e.id));t(new l(i,s,r),this.RoutePointListComponent.getElement())}}}(m,_,g).init()})();
//# sourceMappingURL=bundle.15d37a0ee56630e52ea3.js.map